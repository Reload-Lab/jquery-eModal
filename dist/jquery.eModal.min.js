!function(e){if(e.eModal)throw new Error("$.eModal already exists!");e.extend(e,{eModal:function(){var t,o,a={},n={},i="<div>",r="",l="hide",d="click",s="submit",c="shown.bs.modal",m="hide.bs.modal",f="modal-body",p=".modal-dialog",u=".modal-backdrop",b=".modal-content",h="eRecyclebin",y="modal-rec",v="modal-tmp",g="danger",x={OK:"Cancel",True:"False",Yes:"No"},w={sm:"sm",lg:"lg",xl:"xl"},C={allowContentRecycle:!0,animation:"fade",async:!1,attributes:{},autofocus:!1,buttons:!1,checkValidity:!1,closeButton:'<button type="button" class="x close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>',closeX:!0,confirmLabel:Object.keys(x)[0],cssClass:!1,dataType:!1,deferred:!1,footer:!0,header:!0,height:!1,id:!1,loading:!1,loadingHtml:'<h5>Loading...</h5><div class=progress><div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 100%"></div></div>',message:!1,modalOptions:{},overlayClose:!0,onHide:!1,pattern:!1,placeholder:!1,position:["start","center"],required:!0,size:r,style:[],styles:!1,subtitle:!1,title:"Attention",url:!1,useBin:!1,value:!1,width:!1,wrapSubtitle:"<small>",wrapTitle:"<h5>",xhr:{}},j={alert:function(t,o){var a={deferred:k(),message:t.message||t};return S(a=e.extend({},"object"==typeof t?t:{},a),o)},ajax:function(a,n){var i={async:!0,deferred:k(),loading:!0,url:a.url||a.message||a,xhr:{dataType:a.dataType||"html",xhrFields:{withCredentials:!1}}};return i=e.extend({},"object"==typeof a?a:{},i),e.ajax(i.url,i.xhr).done((function(a){if((e("#eModal").data("bs.modal")||{})._isShown)return t.find(".modal-body").html(i.success?i.success(a):a),o.resolve(t);t.on(c,(function(e){return t.find(".modal-body").html(i.success?i.success(a):a),o.resolve(t)}))})).fail((function(a,n,r){if((e("#eModal").data("bs.modal")||{})._isShown){var l=i.error?i.error(a,n,r,i):'<div class="alert alert-danger mb-0"><strong>XHR Fail: </strong>URL [ '+i.url+"] load fail.</div>";return t.find(".modal-body").html(l),o.reject(a)}t.on(c,(function(e){var l=i.error?i.error(a,n,r,i):'<div class="alert alert-danger mb-0"><strong>XHR Fail: </strong>URL [ '+i.url+"] load fail.</div>";return t.find(".modal-body").html(l),o.reject(a)}))})),S(i,n)},confirm:function(a,n){var i={async:!0,buttons:[{close:!0,click:r,resolve:!1,text:x[a.confirmLabel]?x[a.confirmLabel]:x[C.confirmLabel],style:a.style&&a.style[0]||g},{close:!0,click:r,resolve:!0,text:x[a.confirmLabel]?a.confirmLabel:C.confirmLabel,style:a.style&&a.style[1]}],deferred:k(),footer:!0,message:a.message||a,onHide:r};return S(i=e.extend({},"object"==typeof a?a:{},i),n);function r(a){return e(a.currentTarget).data("resolve")?o.resolve(t):o.reject(t)}},prompt:function(a,n){var i={async:!0,deferred:k(),footer:!1,message:a.message||a,onHide:d},l=M({footer:!0,buttons:[{close:!0,type:"reset",text:x[a.confirmLabel]?x[a.confirmLabel]:x[C.confirmLabel],style:a.style&&a.style[0]||g},{close:!1,type:s,text:x[a.confirmLabel]?a.confirmLabel:C.confirmLabel,style:a.style&&a.style[1]}]});return(i=e.extend({},"object"==typeof a?a:{},i)).message=e('<form class="m-0 p-0" role="form"><div class="modal-body"><label for="prompt-input" class="control-label">'+(i.message||r)+'</label><input type="text" class="prompt-input form-control" required autocomplete="on" value="'+(i.value||r)+'"'+(i.required?" required":r)+(i.pattern?' pattern="'+i.pattern+'"':r)+(i.placeholder?' placeholder="'+i.placeholder+'"':r)+'"></div></form>').data("type","prompt").append(l).on(s,d),S(i,n);function d(e){e.preventDefault();var a=t.find(".prompt-input").val();F(),e.type===s&&o.resolve(a)}},iframe:function(a,n){var i={async:!0,deferred:k(),footer:!1,url:a.url||a.message||a};i=e.extend({},"object"==typeof a?a:{},i),a.width&&T(a.width),a.height&&T(a.height,"height"),i.message=e('<div class="modal-body p-0"><div class="eLoading d-flex flex-column justify-content-center position-absolute w-100 h-100 p-3 text-center bg-white" style="z-index: 100"></div><iframe class="d-block w-100 h-100" frameborder="0" style="z-index: 10"></iframe></div>').data("type","iframe");var r=i.message.find("iframe").attr("src",i.url);return e.each(i.attributes,(function(t,o){"width"!=t&&"height"!=t&&r.attr(t,e("<div/>").text(o).html())})),i.message.find(".eLoading").append(a.loadingHtml||C.loadingHtml),O("3.0.0")?i.message.find("iframe").on("load",l):i.message.find("iframe").load(l).end(),S(i,n);function l(){e(this).parents(".modal-body").find(".eLoading").fadeOut(400,(function(){e(this).remove()})),o.resolve(t)}},embed:function(a,n){var i={async:!0,deferred:k(),url:a.url||a.message||a};(i=e.extend({},"object"==typeof a?a:{},i)).message=e('<div class="modal-body p-0"><div class="eLoading d-flex flex-column justify-content-center position-absolute w-100 h-100 p-3 text-center bg-white" style="z-index: 100"></div><div class="embed-responsive embed-responsive-16by9" style="z-index: 10"><iframe class="embed-responsive-item d-block w-100" frameborder="0"></iframe></div></div>').data("type","embed");var r=i.message.find("iframe").attr("src",i.url);return e.each(i.attributes,(function(t,o){r.attr(t,e("<div/>").text(o).html())})),i.message.find(".eLoading").append(a.loadingHtml||C.loadingHtml),O("3.0.0")?i.message.find("iframe").on("load",l):i.message.find("iframe").load(l).end(),S(i,n);function l(){e(this).parents(".modal-body").find(".eLoading").fadeOut(400,(function(){e(this).remove()})),o.resolve(t)}}};return j.close=F,j.label=function(e,t){return x[e]=t,j},j.emptyBin=function(){return e("#"+h+" > *").remove(),j},j.setId=function(e){return z(!0).find(p).prop("id",e),j},j.modal=function(){if(t)return t},j.defer=function(){if(o)return o},j.size=function(e){return w[e]=e,j},j.version="1.0.0",j;function k(){return(o=e.Deferred()).promise=o.promise(),o.promise.element=z(!0).find(p),o}function L(t){if(t.header){var o=e(i).addClass("modal-header").prop("id","eHeader");if(t.title){var a=e(t.wrapTitle).appendTo(o).addClass("modal-title").html(t.title);t.subtitle&&e(t.wrapSubtitle).appendTo(a).html(" "+t.subtitle)}return t.closeX&&e(t.closeButton).appendTo(o),o}return r}function M(t){if(t.footer){if(!1===t.buttons)return r;var o=e(i).addClass("modal-footer").prop("id","eFooter");if(Array.isArray(t.buttons))for(var a=0;a<t.buttons.length;a++){var n=t.buttons[a],l=e("<button>").addClass("btn btn-"+(n.style||"primary"));for(var s in n.style&&delete n.style,n)if(n.hasOwnProperty(s))switch(s){case"close":n[s]&&l.attr("data-dismiss","modal").addClass("x");break;case d:if("function"==typeof n.click){var c=n.click.bind(z(!0).find(b));l.on("click",c)}break;case"resolve":l.data(s,n[s]);break;case"text":l.html(n[s]);break;default:l.attr(s,e("<div/>").text(n[s]).html())}o.append(l)}else"string"==typeof t.buttons?o.html(t.buttons):o.append('<button class="x btn btn-primary" data-dismiss="modal" type="button">Close</button>');return o}return r}function H(t){var o;t.message&&t.message instanceof jQuery?content=t.message.clone(!0):content=t.message;try{if(t.useBin&&t.id&&e("#"+h).find("#"+t.id+"-bin").length)$bin_content=e("#"+h).find("#"+t.id+"-bin"),a=$bin_content.clone(!0),$bin_content.remove();else var a=e(t.loading?t.loadingHtml:content);if(!a.length)throw new Error("This is a string!");o=a.hasClass(f)||a.find(".modal-body").length?a.addClass(t.useBin&&!t.loading?y:v):e(i).addClass(f).addClass(t.useBin&&!t.loading?y:v).attr("style","word-wrap: break-word;").append(a)}catch(a){console.log(a),o=e(i).addClass(f).attr("style","word-wrap: break-word;").html(t.loading?t.loadingHtml:content)}return o.prop("id",t.id||"eBody"),t.styles&&t.styles!==o.css&&o.css(t.styles),o}function T(t,o){var a=Number(window.getComputedStyle(document.documentElement).getPropertyValue("font-size").match(/\d+/)[0]);if(e(window).outerWidth()>=576)var n=3.5;else n=1;if(o&&"height"==o)var i=e(window).height()-n*a;else i=e(window).width()-n*a;return-1!=t.indexOf("px")?((t=+t.replace("px",""))>i&&(t=i),t+"px"):-1!=t.indexOf("%")?(t=(t=+t.replace("%",""))>100?i:parseInt(i*t/100))+"px":isNaN(+t)?void 0:((t=+t)>i?t=i:0==t&&(t=300),t+"px")}function O(t){var o=e.fn.jquery.split("."),a=t.split("."),n=o[0],i=o[1],r=o[2],l=a[0],d=a[1],s=a[2];return!(l>n||l===n&&d>i||l===n&&d===i&&s>r)}function z(o){return t=e("#eModal").length?e("#eModal"):e('<div id="eModal" class="modal eModal" tabindex="-1"><div class="modal-dialog modal-eModal modal-dialog-scrollable"><div class="modal-content"></div></div><style id="eStyle"></style></div>').appendTo("body").on("hidden.bs.modal",B).on(d,".x",R),e("#"+h).length||e(i).appendTo("body").prop("id",h).hide(),o&&!0===o&&t||(t.find("#eStyle").html(function(e){if(e.width)var t=T(e.width);if(e.height)var o=T(e.height,"height");return".modal-eModal {display: flex; align-items: "+e.position[0]+"; justify-content: "+e.position[1]+"; width: calc(100% - 1rem)!important; max-width: none; height: calc(100% - 1rem)!important;}.modal-eModal.modal-dialog-scrollable .modal-content {overflow: visible !important;}@media (min-width: 576px) {.modal-eModal {width: calc(100% - 3.5rem)!important; height: calc(100% - 3.5rem)!important;}}.modal-eModal .modal-content {max-width: 500px;}.modal-eModal.modal-sm .modal-content {max-width: 300px;}.modal-eModal.modal-lg .modal-content {max-width: 800px;}.modal-eModal.modal-xl .modal-content {max-width: 1140px;}"+(t?".modal-eModal .modal-content {max-width: "+t+" !important; width: 100%;}":"")+(o?".modal-eModal .modal-content {max-height: "+o+" !important; height: 100%;}":"")}(o)),o.autofocus&&t.on(c,(function(){e(this).find("input[type=text], input[type=password], input[type=email], input[type=tel], input[type=date], input[type=time], input[type=datetime-local], input[type=url], input[type=number], input[type=search], input[type=color], textarea, select").first().focus()}))),t}function B(o){if(t){if(o instanceof e.Event)var a=n;else a=o;var i=t.find(".modal-rec").removeClass(y).appendTo("#"+h);a.id&&i.prop("id",a.id+"-bin"),a.allowContentRecycle&&a.id||i.remove(),t.off(m).off(c).find(b).children().remove()}}function R(o){o.preventDefault();var a=e(o.currentTarget);if(a.prop("type")!==s)return t.modal(l);try{obj.checkValidity&&a.closest("form")[0].checkValidity()&&F()}catch(e){F()}}function S(o,i){var r;r="object"==typeof o?o:{},n={},e.extend(n,C,r),n.overlayClose||e.extend(n.modalOptions,{backdrop:"static"}),"object"==typeof n.modalOptions&&function(o){t&&t.remove(),e.extend(a,o)}(n.modalOptions),"string"==typeof o&&(n.message=o),i&&(n.title=i);var l=n.deferred||k();!function(e){if(!e)throw new Error("First argument cannot be blank!");B(e);var t=z(e);t.addClass(e.animation).find(p).removeClass((function(){return w?Object.keys(w).map((function(e){return"modal-"+w[e]})).join(" "):""})).addClass(e.cssClass||null).addClass(e.size?"modal-"+e.size:null),"function"==typeof e.onHide&&t.on(m,e.onHide)}(n);var d={header:L(n),body:H(n),footer:M(n)};return e(u).length&&e(u).remove(),function(e){t.find(b).append(e.header,e.body,e.footer),t.modal(a)}(d),!o.header&&o.overlayClose&&t.find(b).append('<button class="x btn btn-sm btn-dark position-absolute" style="top: -10px; left: -10px; width: 20px; height: 20px; padding: 0; line-height: 1;" data-dismiss="modal" type="button">&times;</button>'),n.async||t.on(c,l.resolve),l.promise}function F(){return t&&t.off(m).modal(l),j}}()})}(jQuery);